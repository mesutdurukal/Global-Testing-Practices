<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Global Testing Practices - Contributors</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1, h2 {
            color: #333;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin: 5px 0;
        }
        #map {
            height: 900px;
            width: 100%;
            margin-top: 20px;
            border: 1px solid #ccc;
        }
        .toc {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #aaa;
            background: #f9f9f9;
            width: fit-content;
        }
        .toc a {
            text-decoration: none;
            color: #0066cc;
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
<h1>Global Testing Practices - Contributors</h1>

<!-- Table of Contents -->
<div class="toc">
    <strong>Index</strong>
    <ul>
        <li><a href="#on-map">Contributors (Shown on Map)</a></li>
        <li><a href="#by-name">Contributors (By Name)</a></li>
        <li><a href="#by-country">Contributors (By Country)</a></li>
    </ul>
</div>

<!-- Map -->
<h2 id="on-map">Contributors (Shown on Map)</h2>
<div id="map"></div>

<!-- Contributors by Name -->
<h2 id="by-name">Contributors (By Name, Nationality, Country)</h2>
<ul id="contributors-by-name"></ul>

<!-- Contributors by Country -->
<h2 id="by-country">Contributors (By Country)</h2>
<div id="contributors-by-country"></div>

<script>
    const contributors = [
        { name: "Mesut Durukal", nationality: "Turkish", country: "Japan", lat: 35.54089, lon: 139.487720 },
        { name: "Amir Najjar", nationality: "Israeli", country: "Japan", lat: 35.6762, lon: 139.6503 },
        { name: "Hiba Ghannam", nationality: "Palestinian", country: "Palestine", lat: 31.9522, lon: 35.2332 },
        { name: "Shumnan Sun", nationality: "Thai", country: "Thailand", lat: 15.8700, lon: 100.9925 },
        { name: "Udit Gattani", nationality: "Indian", country: "India", lat: 12.921, lon: 77.672 },
        { name: "Tim Lolkema", nationality: "Dutch", country: "Netherlands", lat: 52.3676, lon: 4.9041 },
        { name: "Anonymous", nationality: "Anonymous", country: "Spain", lat: 40.41536, lon: -3.6829 },
        { name: "Maryia Tuleika", nationality: "Belarusian", country: "Sweden", lat: 59.31218, lon: 19.534 },
        { name: "Vitaly Sharovatov", nationality: "Russian", country: "France", lat: 48.8631, lon: 2.314415 },
        { name: "Attila Fekete", nationality: "Hungarian", country: "Hungary", lat: 47.501, lon: 19.03347 },
        { name: "Anonymous", nationality: "Anonymous", country: "Japan", lat: 35.6062, lon: 139.503 },
        { name: "Marina Ernst", nationality: "Russian", country: "Germany", lat: 50.355, lon: 7.5919 },
        { name: "Péter Földházi", nationality: "Hungarian", country: "USA", lat: 40.7449, lon: -73.999 },
        { name: "Anonymous", nationality: "Turkish", country: "Turkiye", lat: 40.973, lon: 29.058 },
        { name: "Mesut Gunes", nationality: "Turkish", country: "Turkiye", lat: 41.0323, lon: 28.8901 },
        { name: "Anonymous Anonymous", nationality: "Filipino", country: "Philippines", lat: 14.600, lon: 120.974 },
        { name: "Toyer Mamoojee", nationality: "South African", country: "UAE", lat: 25.1104, lon: 55.2823 },
        { name: "Anupam Krishnamurthy", nationality: "Indian", country: "Germany", lat: 52.5063, lon: 13.412 },
        { name: "Andrew Brown", nationality: "English", country: "England", lat: 52.12378, lon: -1.8383 },
        { name: "Vipin Jain", nationality: "Indian", country: "India", lat: 18.52752, lon: 73.85541 }
    ];

    // Helper: build file path if not anonymous
    function getFilePath(c) {
        if (!c.name || c.name.toLowerCase() === "anonymous") return null;
        const parts = c.name.trim().split(/\s+/);
        if (parts.length < 2) return null; // need first+last name
        const first = parts[0].toLowerCase();
        const last = parts[parts.length - 1].toLowerCase();
        return `submissions/${c.country}/${first}.${last}.md`;
    }

    // Map
    const map = L.map('map').setView([18, 20], 3);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);
    contributors.forEach(c => {
        L.marker([c.lat, c.lon]).addTo(map)
            .bindPopup(`${c.name}<br>${c.nationality}, ${c.country}`);
    });

    // By Name
    const byNameList = document.getElementById("contributors-by-name");
    contributors.forEach(c => {
        const filePath = getFilePath(c);
        const li = document.createElement("li");
        if (filePath) {
            li.innerHTML = `<a href="${filePath}" target="_blank">${c.name}</a>, ${c.nationality}, ${c.country}`;
        } else {
            li.textContent = `${c.name}, ${c.nationality}, ${c.country}`;
        }
        byNameList.appendChild(li);
    });

    // By Country
    const byCountryDiv = document.getElementById("contributors-by-country");
    const grouped = {};
    contributors.forEach(c => {
        if (!grouped[c.country]) grouped[c.country] = [];
        grouped[c.country].push(c);
    });
    for (const country in grouped) {
        const h3 = document.createElement("h3");
        h3.textContent = country;
        byCountryDiv.appendChild(h3);
        const ul = document.createElement("ul");
        grouped[country].forEach(c => {
            const filePath = getFilePath(c);
            const li = document.createElement("li");
            if (filePath) {
                li.innerHTML = `<a href="${filePath}" target="_blank">${c.name}</a>, ${c.nationality}`;
            } else {
                li.textContent = `${c.name}, ${c.nationality}`;
            }
            ul.appendChild(li);
        });
        byCountryDiv.appendChild(ul);
    }
</script>
</body>
</html>
